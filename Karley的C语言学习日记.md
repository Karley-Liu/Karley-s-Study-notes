# C语言概述

## 最简单的C语言程序

```c
#include <stdio.h>	//stdio.h是C编译系统提供的一个文件名，stdio是“standard input & output"的缩写，系统提供的标准函数库中的输入输出函数时，应在开头写这一行
int main()	//主函数名字，int表示此主函数为整型
{
    printf("Hello World!\n");	//函数体执行区域，\n为换行符
    return 0;	//必有部分，表示程序成功执行
}

//运行结果
Hello World!
```

- 每一个C语言程序都必须有一个main函数，并且总是从main函数开始执行
- 若该函数体内部调用其他函数，则要对所调用的函数体进行声明
- 每一个函数都要有函数名，也要有函数体



# 数据的存储与运算

## 二进制式存储

十进制数为10，二进制数为1010，含义：

$$
1*2^3+0*2^2+1*2^1+0*2^0
$$

### 位，字节和地址

**位**，又称”比特“(bit)。每一个二极管元件成为一个“二进制位”，是最小的存储信息单位。它的值是“1”或“0”。

**字节**，又称“拜特”(byte)。一个存储器包含许多个“二进制位”，一般8个“二进制位”组织成一组，成为“字节”，这是人们最常用的存储单位

- 125K指125字节，就是12.5万个字节
- 256M为256兆字节，一兆是10^6,就是100万
- 硬盘容量40G，40G兆字节，一个G是10^9，40G就是400亿字节

注意：实际上1K字节为1024字节

**地址**，计算机存储器包含许多存储单元，操作系统把所有存储单元以字节为单位编号，实际上**计算机用2个或者4个字节存放一个证书整数**，因为**一个字节只有8个二进制位**，能存放的数据范围比较小。

## 不同类型的存储方式

### 整数的存储方式

一个十进制整数，先转换为二进制形式，存放在存储单元中，以一个字节(8个二进制位)来存储，

整数10，二进制为1010：

| 符号位 |      |      |      |      |      |      |      |
| ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0      | 0    | 0    | 0    | 1    | 0    | 1    | 0    |

- 符号位为最高位，最高位为0时表示正数。
- 一个字节最大值为01111111，就是2^7-1，相当于十进制的127。
- C语言编译系统以4个字节表示一个整数，这时最大值31位都是1，即2^31-1，约为21亿。

**如何表示负数？**

在计算机的存储器中，整数以补码形式存放，一个正数的补码和该数的原码(就是该数的二进制形式)相同，如整数10的原码和补码都是00001010，对于负数先求出补码，再存储到存储单元。

### 实数的存储形式

什么是实数？123.456就是一个实数，对于实数一律采用指数形式存储，123.456写成标准化指数形式为0.123456*10^3

**标准化指数形式**：数值部分是一个小数，小数前的数字是0，小数点后第一位数字不是0，其他的形式都不是标准化指数形式，计算机内存中按照标准化指数形式存储

- 计算机一般以4个字节存储一个实数
- 以3个字节存放数值部分(包括数符)，以一个字节存放指数部分(包括指数符号)

| 数符 | 数值部分 | 指数符号 | 指数 |
| ---- | -------- | -------- | ---- |
| +    | .123456  | +        | 3    |

​	

### 字符的存储方式

字符包括字母，符号，计算机不能将字符本身存到存储单元中，存储单元只能存放二进制信息，将字符转成ASCII代码存储到存储单元中。

完整的ASCII表上网搜就可看到，**注意**，ASCII表中允许使用的字符不超过255个，其中前127个是基本通用的。ASCII从128到255相应的字符在不同的操作系统中是不同的，因此常用的ASCII为0到127的字符。127用二进制位可以表示：1111111，占用7个二进制位。可见用一个字节(8个二进制位)就可以存放一个字符的代码。

## 整型常量与整型变量

**常量**：程序运行过程中其值不能改变的量，他们的值始终是固定的

**变量**：在程序运行过程中可以改变的量，可以赋予他们新的值，在定义变量时，编译系统会给他们分配相应的存储单元，用来存储数据，**变量名就是以一个容易记忆的名字代表一个存储单元的地址**，或者说，**变量名是该存储单元的符号地址**。当程序中有一个赋值语句时，编译系统就根据变量名找到它对应的存储单元地址，把新的值存放到该存储单元中。

#### 整型常量的表达形式

1. 十进制整数，如123，-456，这都是最常用的。

2. 八进制整数，八进制整数的特点是逢8进1。在程序中凡以0开头的数都认作八进制数，如0123表示八进制数123，(123)*8*，其值为

   
   $$
   (123)8=1*8^2+2*8^1+3*8^0
   $$
   ，等于十进制数83，-011表示八进制数-11，即十进制数-9。

3. 十六进制整数，十六进制整数特点逢16进1.在十六进制数中可以用0~15这16个数，但应该只用一个字符代表其中一个数，C规定用字母a,b,c,d,e,f分别代替10，11，12，13，14，15。在程序中凡以0x开头的数都认为是十六进制数。如0x123，代表十六进制数123，即
   $$
   (123)16=1*16^2+2*16^1+3*16^0=256+32+3=291
   $$

   0x2a代表十进制数

$$
2*16^1+10*16^0=32+10=42
$$

​		-0x12等于十进制数-18。

以上三种形式都是合法有效的，以下3个赋值语句都是等效的(设定a已定义为整型变量)

```
a=83;	//十进制数
a=0123;	//八进制数
a=0x53;	//十六进制数
```



#### 整型变量的种类

整型变量的基本类型为int，这是用得最多的，编译时系统为他分配一定的字节(Turbo C分配2个字节，Visual C++为他分配4个字节)。2个字节可以表示的数值范围为-2^15~2^15-1，即-32769~32767，本书一般以整型数据占4个字节说明。

- 基本整型，类型名int
- 长整型，类型名long int
- 短整型，类型名short int

如果存储的值是无符号的，可以在类型名前面加修饰词unsigned，也可以加修饰词signed，表示有符号，int类型默认有符号，所有加signed多余

## 实型变量的表示形式

实数在计算机语言中成为浮点数(float)。

浮点数分为两种表示形式：

1. **十进制小数形式**。由数字和小数点组成，必须有小数点，0.123，10.0。
2. **指数形式**。123x10^3。在计算机中无法表示上角和下角，所以用字母e和E代表以10为底的指数。用123e3或者123E3代表123x10^3，注意字母e或E之前必须有数字，且e**后面的指数必须为整数**，如e3，2.1e3.5，.e3，2e

**注意**：如果一个实数要以指数形式输出时，是以标准化指数形式输出的，实数5689.65以指数形式(%e格式输出)，输出的形式是5.68965e+003(**有疑问**)

这是在下实测结果：

![image-20200430140015523](C:\Users\hp\AppData\Roaming\Typora\typora-user-images\image-20200430140015523.png)

### 实型变量

#### 实型变量的分类

- 单精度实型变量(float型)
- 双精度实型变量(double型)
- 长双精度实型变量(long double型)

一般C编译系统为单精度(float)型数据分配4个字节，为双精度(double)分配8个字节，对于长双精度(long double)型不同系统的做法差别很大，有的和double型一样分配8个字节(Visual C++ 6.0)，有的分配16个字节，可以用**sizeof(long double)**测定所用的C系统的分配。

```c
//sizeof是C语言运算符，用来测定类型或变量的长度。用法：
	sizeof(类型名)
        or
    sizeof(变量名)
//sizeof(int),sizeof(double),sizeof(r)都是合法的，(假设r是已定义的某一种类型的变量)
//可以用prinf函数输出此值，如：
        printf("%d",sizeof(long double));
//输出的是它所占的字节数
```

- 一般占4个字节的单精度数据的数值范围为10^-38~10^38，有效位数为7
- 双精度数据的数值范围为10^-308~10^308，有效位数为15~16位

#### 实型数据的舍入误差

``` c
#include <stdio.h>
int main()
{
    float a;
    a=1234.1415926;
    printf("a=%f\n",a);
    return 0;
}
//输出1234.141602
```

虽然输出了小数点后6位数字，但是由于a是单精度浮点型变量，只能提供6~7位有效数字，因此1234.141后面几个小数不是精确的。

**注意**：在使用计算机进行计算时，必须建立工程观点。要了解计算机是如何实现的，以及由此可能出现什么问题。在计算机上的计算不是理论值计算，纯数学的计算是绝对准确的，不会出现误差，而计算机是用有限的空间(存储单元)来存储数据的，有可能出现小的误差，这是正常的，这时如果对输出结果有要求应该要考虑减少误差的方式。

#### 实数按照双精度数处理

单精度(float)最多能保证7位有效数字(其中第7位还不能保证完全准确，第8位数以后按照四舍五入处理得到结果)，因此为了提高数据的精度，可以将变量定义为双精度类型，用8个字节存储数据，可以得到15~16位有效位数。

一般C编译系统会自动把程序中**实常量**处理成**双精度**，分配8个字节提高精度。

## 字符型数据的运算

### 字符常量和字符变量

C语言的字符常量是用单撇号括起来的一个字符，**注意**，小写字母和大写字母是不同的字符常量。

#### 转义字符

在编译时遇到字符'\\'，'\\'就会为后面一个字符作为特殊字符处理，这样的字符成为转义字符。

常用的转义字符：

| 转义字符 | 解释                                                         |
| -------- | ------------------------------------------------------------ |
| \n       | 换行                                                         |
| \t       | 使下一个输出的数据跳到下一个输出区(一行中一个输出区占7列)    |
| \b       | 退格。当前的输出位置退回到前一列处，消除前一个已输出的字符   |
| \r       | 回车，当前输出位置返回本行开头                               |
| \f       | 换页。当前输出位置移到下页开头                               |
| \0       | 代表ASCII代码为0的控制字符，即“空操作”字符。常用于字符串中，作为字符串的结束标志。 |
| \\\      | 代表一个反斜杠字符"\\"                                       |
| \\'      | 代表一个单撇号字符                                           |
| \\\"     | 代表一个双撇号字符                                           |
| \\ddd    | 1~3位8进制数所代表的字符                                     |
| \\xhh    | 1~2位16进制数所代表的字符                                    |

例如：

- '\\101'代表ASCII码为八进制数101的字符，八进制数101等于十进制数的65，从ASCII中可知65所代表的字符为'A'，因此'\\101'和'\\A'等价。
- '\\12'，八进制数的12等于十进制数的10，在ASCII中码为10的是换行符n，所以'\\12'和'\\n'等价。

**注意**：反斜杠'\\'其后只能有一个字符(或者代表字符的八进制位或十六进制位代码)

#### 字符变量

字符型变量用来存放字符常量，它只能存放一个字符，一个字符变量不能存放一个字符串。

**字符数据和整型数据在一定条件下可以通用**

字符'a'，它的ASCII码是91，在内存中的存储情况是：01100001

字符数据和整形数据的存储形式从形式上没有什么区别，这样整型数据和字符数据之间可以通用，以下两句等价：

```c
char c ='a';	//将字符常量'a'赋给字符常量c
char d =97;		//将'a'的ASCII代码赋给字符变量c
```

**注意**：赋给字符变量的整数范围为0~127，它们对应有效字符。

字符数据既可以以字符形式(%c格式)输出，也可以以整数型式输出(%d格式)。按字符型输出时，系统将存储单元中ASCII码转换为相应字符，然后输出。按整型输出时，直接将ASCII码作为整数输出。

```c
#include <stdio.h>
int main()
{
	char c1 = 97,c2 = 98;	//将'a'和'b'的ASCII码分别赋给字符变量c1,c2
    printf("%c %c\n");	//字符数据按照字符形式输出
    printf("%d %d\n");	//字符数据按照整数型式输出
    return 0
}
//运行结果
//a b
//97 98
```

如何将小写字母转成大写字母？在ASCII表中小写字母比它的大写字母大32：

```c
#include <stdio.h>
int main()
{
    char c1='a',c2='b';
    c1=c1-32;	//将c1的ASCII代码减32
    c2=c2-32;	//将c2的ASCII代码减32
    printf("%c,%c\n",c1,c2);
    return 0;
}
//运行结果
//A,B
```

#### 字符串常量

字符串常量是一对双撇号括起来的字符序列。

**注意**：请区分**字符**常量与**字符串**常量。'a'是字符常量，"a"是字符串常量，二者的含义是不同的：

```c
#include <stdio.h>
int main()
{
	char c;	//c被指定为字符变量
    c='a';	//将字符'a'赋给字符变量c
    printf("%c\n",c);
    return 0
}
//这是正确
//如果c="China";则是错误的，因为一个字符变量只能存放一个字符，不能存放多个字符
//及时改写成c="a";也不行，不能把字符常量赋给一个字符变量
```

**'a'和"a"到底区别在哪里？**

C语言编译系统在处理字符串的时候在每一个**字符串常量**的结尾加一个字符'\\0'，作为字符串结束的标志。'\\0'是一个ASCII码为0的字符，ASCII码为0的字符是"空操作字符"，就是不引起任何控制动作，也不是一个可显示的字符，一个字符串常量"KARLEY"，实际上在存储单元中的情况是(以字符形式表示)：

K A R L E Y \0

不要把其中的'\\0'误以为0，'\\0'的ASCII代码为0，而数字字符0在ASCII码中为48，上面存储单元用ASCII代码表示为：

75 65 82 76 69 89 0

输出字符串常量的时候并不输出'\\0'，直到遇到最后附加的'\\0'字符，就知道字符串结束，停止输出。

**注意**：在写字符串的时候不比添加'\\0'，否则会画蛇添足。'\0'字符是系统自动加上的。字符串"a"实际上包含2个字符：'a'和'\\0'，因此，想把它赋给只能容纳一个字符的字符变量c显然是不行的。

**注意**：C语言中没有专门的字符串变量，不能将一个字符串存放在一个变量中。如果想存放字符串必须使用**字符数组**，就是用一个字符型数组存放一个字符串，每个元素存放一个字符。

#### 符号常量

那些整型常量、实型常量、字符常量、字符串常量可以从字面形式判断它是哪类常量，这种常量成为**字面常量**或**直接常量**。为了使用方便，用一个符号代替一个常量称为**符号常量**。

在一个计算圆周长、面积、体积的程序中：

```c
#include <stdio.h>
#include <math.h>	//调用pow函数必须包含"math.h"头文件
int main()
{
    double r=3.67,c,s,v;
    c=2*3.1415926*r;
    s=3.1415926*pow(r,2);	//调用pow函数求r^2
    v=4.0/3.0*3.1415926*pow(r,3);	//调用pow函数求r^3
    printf("c=%f\ns=%f\nv=%f\n",c,s,v);
    return 0;
}
```

大量重复的常量不仅增加输入工作量，而且容易出错，降低程序的可读性。如果用一个符号名**PI**代表3.1415926就不必在每处重复写，那这个**PI**就叫**符号常量**

修改的代码：

```c
#define PI 3.1415926	//定义符号常量PI为3.1415926
#include <stdio.h>
#include <math.h>
int main()
{
    double r=3.67,c,s,v;
    c=2*PI*r;	使用符号常量PI
    s=PI*pow(r,2);
    v=4.0/3.0*PI*pow(r,3);
    printf("c=%f\ns=%f\nv=%f\n",c,s,v);
    return 0;
}
```

##### 符号常量的性质和使用方法

#define不是C语句，改行末尾没有分号，它是一个"预编译指令"。

程序编译时，分为两个步骤：

1. 进行一次"预编译"，对所有的预编译指令进行处理。例如它根据#define PI 3.1415926指令中的规定，对程序出现的所有PI都用3.1415926取代，在进行预编译时，同样也要对#include <stdio.h>和#include <math.h>指令进行处理。
2. 然后进行正式编译工作，得到目标文件(后缀为.obj)。
3. 不要把符号常量和变量混淆，符号常量只是一个符号，不占据存储单元。它只是简单地进行字符置换。

**注意**：

- 符号常量只是符号，不是变量，不能被赋值，有再复制语句给PI是错误的。
- 不能对符号常量指定类型。

习惯上，符号常量用大写，变量用小写，以作区分。

**符号常量和符号变量在使用上的区别**：

在同一程序上对pi进行正确赋值同样都能得到相同结果，但是符号常量不允许赋值，若是使用符号变量在程序中不小心对变量进行再赋值，程序结果错误，而符号常量能保护所代表的数据不被破坏。

## 算术运算符和算术表达式

### 算术运算符

#### 基本的算术运算符

| 符号 | 解释                                                         |
| ---- | ------------------------------------------------------------ |
| +    | 加法运算符，或正值运算符                                     |
| -    | 减法运算符，或负值运算符                                     |
| *    | 乘法运算符，键盘上无"×"，以"*"代替                           |
| /    | 除法运算符，键盘上无"÷"，以"/"代替                           |
| %    | 模运算符，又称求余运算符，求两个整数相除后的余数，%两侧均应为整型数据 |

**注意**：运算符的优先级和数学上规定的**先乘除后加减**一样。

需要说明：如果两个整数相除的结果为整数，如5/3的结果值为1，舍去小数部分。如果除数或被除数中有一个为负值，则舍入的方向是不固定的。例如-5/3在有的系统中得到的结果为-1，在有的系统中结果为-2，多数C编译系统采取"**向零取整**"的方式。即5/3=1,-5/3=-1，取整后向零的方向靠拢。

**注意**：如果算术运算符运算的两个数中有一个为float或double，则结果都是double，因为系统将所有的float都转为float，再进行运算，提高运算精度。

#### 自增、自减运算符

```js
++i,--i		(在使用i之前，先使i的值加/减1)
i++,i--		(在使用i之后，使用i的值加/减1)
```

使用变量j作为辅助说明

```js
j=++i;		(先使用i的值变成4，再赋给j，j的值为4)
j=i++;		(先将i的值3赋给，j的值为3，然后i再变成4)
```

**注意**：自增自减运算符只能用于变量，不能用于常量，例如5++是不合法的。

### 算术表达式

#### 强制类型转换

强制类型转换将运算结果转换成所需的类型：

```js
(double)a		(将a转换成double类型)
(int)(x+y)		(将x+y的值转换成整型)
(float)(5%3)	(将5%3的值转换成float型)
```

如果写成：

```
(int)x+y		(则只将x类型转换为整型在与y相加)
```

需要注意：

- 在强制类型转换时，得到一个所需类型的中间变量，原来变量的类型并未发生改变。
- 如果定义x为float类型，强制转换为int类型，它的值等于x的整数部分。

```c
#include <stdio.h>
int main()
{
    float f=3.6;
    int i;
    i=(int)f;
    printf("f=%f,i=%d\n",f,i);
    return 0;
}
//运行结果
//f=3.6000000,i=3
```

**注意**："%"运算符要求其两侧都是整型，如果x为float，则"x%3"不合法，必须使用"(int)x%3"，强制优先转化优于%运算。

## C运算符和C表达式

### C运算符

| 运算符名称         | 符号                        |
| ------------------ | --------------------------- |
| 算数运算符         | +,-,*,/,%                   |
| 关系运算符         | >,<,==,>=,<=,!=             |
| 逻辑运算符         | !,&&,\|\|                   |
| 位运算符           | <<,>>,~,\|,&                |
| 赋值运算符         | =及其扩展赋值运算符         |
| 条件运算符         | ?:                          |
| 逗号运算符         | ,(返回值，返回的事后面的值) |
| 指针运算符         | *获取地址，&获取变量        |
| 求字节数运算符     | sizeof                      |
| 强制类型转换运算符 | (类型)                      |
| 分量运算符         | .,-,>                       |
| 下标运算符         | []                          |
| 其他               | 如函数调用运算符            |

### C表达式

| 表达式名称 | 具体表达式                                                   |
| ---------- | ------------------------------------------------------------ |
| 算数表达式 | 2+6.7*3.5+sin(0.5)                                           |
| 关系表达式 | x>0,y<z+6                                                    |
| 逻辑表达式 | x>0 && y<0 (表示x>0和y<0同时成立)                            |
| 赋值表达式 | a=5.6                                                        |
| 逗号表达式 | a=3,y=4,z=8,用逗号连接若干个表达式，顺序执行这些表达式，整个逗号表达式的值都是最后一个表达式的值。 |

## 求补码

之前讲过计算机存储整数(不论正数负数)都是按照"补码"的形式存放到存储单元的。对于正数来说补码就是该码的"原码"(该数的二进制形式)。负数的补码不是它的原码。求一个负数的补码方式：

1. 取该数(不考虑数的符号)的二进制形式，它就是原码，加入有一个负数-1，不考虑符号就是1，它的二进制形式是00000001，这就是-1的原码。
2. 对该源码逐位"取反"(逐位把0变成1，把1变成0)，得到其"**反码**"，00000001的反码是11111110。
3. 将得到的反码加1，11111110加1就是11111111，这就是-1的补码。

例如：求-10的补码步骤

1. -10的原码是00001010
2. 其反码是11110101
3. 加上1，其补码是11110110

可以看出负数的补码形式最高位都是1，由此第1位就可以判断该数的正负。



# 最简单的C程序设计--顺序程序设计

## 算法是程序的灵魂

数据结构+算法=程序

## 程序的三种基本结构

- 顺序结构，执行完A必然执行B。
- 选择结构，选择结构又称**判断结构**或**分支结构**，无论条件是否成立，只能执行A操作或B操作之一，不可能两个操作一起执行。A和B两个操作中可以有一个是空操作。
- 循环结构。又称重复结构，在一定条件下不停地执行函数体，知道条件不成立为止。

## C语言综述

1. **控制语句**：

   C有9种控制语句：

   | 语句         | 说明                         |
   | ------------ | ---------------------------- |
   | if()……else…… | (条件语句，用来实现选择结构) |
   | switch       | (多分支选择语句)             |
   | for()……      | (循环语句，用来实现循环结构) |
   | while()……    | (循环语句，用来实现循环结构) |
   | do……while()  | (循环语句，用来实现循环结构) |
   | continue     | (结束本次循环语句)           |
   | break        | (中止执行switch或循环语句)   |
   | return       | (从函数返回语句)             |
   | goto         | (转向语句，现已基本不用)     |

   

2. **函数调用语句**

   ```
   printf("I am KarleyLIn");
   ```

3. **表达式语句**

   ```
   a=3;
   ```

4. **空语句**

   ```
   ;
   ```

5. **复合语句**

   ```
   {
   	z=x+y;
   	t=z/100;
   	printf("%f",t);
   }
   ```

   

## 数据输入输出的概念

- 所谓**输入输出是以计算机主机为主体**而言的，输入设备包括键盘、鼠标、磁盘、光盘、扫描仪等，输出设备如显示器、打印机等。

- C语言本身不提供输入输出语句。

- 在使用系统库函数时，要在程序中使用预编译指令"#include"。#include指令都是放在程序开头，这类文件成为头文件。"stdio.h"包含了标准I/O库有关的变量定义和宏定义以及对函数的声明。

  ```
  #include <stdio.h>
  	或
  #include "stdio.h"
  ```



### 字符数据的输入输出

#### 用putchar函数输出一个字符

```c
#include <stdio.h>
int main()
{
	char a,b,c;
    a='L';b='I';c='n';
    putchar(a);
    putchar(b);
    putchar(c);
    putchar('\n');
    return 0;
}
//运行结果
//LIn
```

如果将上述变量赋予ASCII码，输出结果依然是ASCII码对应的字符。如果putchar输入的八进制数，如putchar('\\015')，八进制数15等于十进制数13，ASCII码中13是回车码，因此输入回车，不换行，使输出的当前位置移到本行开头。

#### 用getchar函数输入一个字符

```c
#include <stdio.h>
int main()
{
	char a,b,c;	//定义字符变量a,b,c
    a=getchar();	//从键盘输入字符，送给字符变量a
    b=getchar();
    c=getchar();
    putchar(a);		//将变量a的值输出
    putchar(b);
    putchar(c);
    putchar('\n');		//换行
    return 0;
}
//输入LIn
//输出LIn
```

**注意**：在用键盘输入信息时，并不是键盘敲一个字符，这个字符立即送到计算机中。这些字符暂存在键盘的缓冲器中，当你按下Enter键才能把字符一起输入到计算机中，按先后顺序分别赋给相应的变量。

所以当你按下一个字符后按下Enter键将会出现以下这种情况：

```C
//输入
L	//输入字符后马上按enter
I
//输出
L	//输出B后换行
I
```

**注意**：第1行输入的不是一个字符，而是两个字符：L和换行符，其中字符L赋给了变量a，换行符赋给了字符b，第2行接着输入两个字符：I和换行符，其中字符I赋给了c，换行符没有送入任何变量。在用putchar函数输出变量a,b,c的值时，就输出字符L,'\n',I。

getchar函数不仅可以从输入设备获取一个可显示的字符，而且可以获得屏幕上无法显示的字符。

```c
#include <stdio.h>
int main()
{
    putchar(getchar());
    putchar(getchar());
    printf("%c",getchar());
   	putchar('\n');
    return 0;
}
```

### 简单的格式输入与输出

#### 基本的格式字符

- **d格式字符**。按十进制整型数据的实际长度输出。

  - **ld格式字符**：在输出长整型数据时在格式字符d前面加l。
  - **md格式字符**：用来指定输出的宽度，如果数据实际位数小于m，左端补以空格，若大于m，则按实际位数输出。

- **c格式字符**。输出一个字符。

  - "**%mc**：用来指定输出字符数据的宽度m。

- **s格式字符**。用来输出一个字符串。

  - "**%ms**"：指定输出的字符串占m列。如果字符串本身长度大于m，则突破m的限制，将字符串全部输出。若串长小于m，则左补空格。
  - "**%-ms**"：如果串长小于m，则在m列范围内，字符串向左靠，右补空格。
  - "**%m.ns**"：输出占m列，但只取字符串中左端n个字符，这n个字符输出在m列的右侧，左补空格。
  - "**%-m.ns**"：n个字符输出在m列范围左侧，右补空格。如果n>m，则m自动取n值，保证n个字符正常输出。

- **f格式字符**。用来输出实数(包括单、双精度)，以小数形式输出，可以不指定输出数据的长度，系统自动指定。系统的处理方法是：实数中的整数部分全部输出，小数部分输出6位。而在用f格式输出时，整数部分加小数部分的长度可能超过单精度实数本身的有效位数，因此输出的数字中并非全部数字都是有效数字。

  - **"%lf"**：这个小写字母l是格式字符f的附加字符，如果不加这个附加字符l，则不能用于输入**双精度变量**。
  - 对于输出的字段有要求可以在格式字符f前面加"7.2"，即**"%7.2f"**，表示指定输出数据的字段宽度为7列，其中小数点后数字为2列。**注意**：如果表示"%m.nf"，m必须大于n。

- **u格式字符**：输出无符号数。

- **o格式字符**：输出八进制整数形式。

- **x格式字符**：以十六进制数形式输出整数。"%lx"输出长整型数，"%12x"：指定输出字段的宽度。

- **e格式字符**。用格式声明%e指定以指数形式输出实数。可以不指定输出数据所占的宽度和数字部分的小数位数，许多C编译系统会自动指定给数字部分的小数位数为6位，指数部分占5列(如e+002)，其中"e"占1列，指数符号占1列，指数占3列。数值按标准化指数形式输出(小数点前必须有且只有1为非零数字)。

  例如：

  ```c
  printf("%e",123.456);
  ```

  输出：

  ```c
  1.234560e+002
  ```

### 用简单的scanf函数输入数据

#### scanf函数的一般形式

```c
#include <stdio.h>
int main()
{
    int a,b,c;
    scanf("%d%d%d",&a,&b,&c);	//输出a,b,c的值
    printf("a=%d,b=%d,c=%d\n",a,b,c);
    return 0;
}
//输入
//3 4 5
//输出
//a=3,b=4,c=5
```

scanf函数中的&a,&b和&c中的"&"是"地址运算符"，&a是指变量a在内存中的地址。

"%d%d%d"表示按十进制整数型式连续输入3个数据。输入数据时，两个数据之间以一个或多个空格分隔，也可以按enter键或tab键来分隔输入的数据。

```c
3  4    5	(两个数据之间以多个空格分隔)
    
3	(两个数据之间插入回车)
45	(两个数据之间以空格分隔)
    
3(Tab)4	(两个数据之间插入tab)
5
    
用上面"%d%d%d"格式字符输入数据时，不能用逗号作两个数据间的分隔符
3，4，5	(不合法)
```

#### scanf函数中的格式声明

1. scanf函数中的"格式控制"后面应当是变量地址，而不是变量名。

2. 如果在"格式控制字符串"中除了格式声明以外还有其他字符，则在输入数据时在对应位置输入与这些字符相同的字符。

   ```c
   scanf("%d,%d",&a,&b);
   ```

3. 在用"%c"格式声明输入字符时，空格字符和"转义字符"都作为有效字符输入，例如：

   ```c
   scanf("%c%c%c",&c1,&c2,&c3);
   ```

   在执行此函数时应该连续输入3个字符，中间不要有空格，如：

   ```c
   abc
   ```

4. 在输入数值数据时，空格、回车、Tab键或遇不合要求的输入，认为该数据结束。例如：

   ```c
   scanf("%d%c%f",&a,&b,&c);
   //若输入
   //1234a 123o.26
   //第一个整数数据对应%d，在输入1234之后遇字符'a'，因此认为数值1234后已经没有数字了，第一个数据结束。1234送给变量a
   //字符a送给变量b
   //由于疏忽把1230.26错打成123o.26，由于123后面出现字母'o'，认为该数值数据结束，123送给c。
   ```

5. 对unsigned型变量所需的数据，可以用%u或%d格式输入。




# 选择结构程序设计

## 条件判断

### 关系运算符

| 符号 | 含义     | 优先级 |
| ---- | -------- | ------ |
| <    | 小于     | 高     |
| <=   | 小于等于 | 高     |
| >    | 大于     | 高     |
| >=   | 大于等于 | 高     |
| ==   | 等于     | 低     |
| ！=  | 不等于   | 低     |

### 逻辑运算符

| 逻辑运算符 | 含义 |
| ---------- | ---- |
| &&         | and  |
| \|\|       | or   |
| !          | not  |

**逻辑运算符真值表**

| a    | b    | !a   | !b   | a&&b | a\|\|b |
| ---- | ---- | ---- | ---- | ---- | ------ |
| 真   | 真   | 假   | 假   | 真   | 真     |
| 真   | 假   | 假   | 真   | 假   | 真     |
| 假   | 真   | 真   | 假   | 假   | 真     |
| 假   | 假   | 真   | 真   | 假   | 假     |

## if语句实现选择结构

### if语句表达形式

```c
if(x>y)
    printf("%d",x);
else
    printf("%d",y);
```

### 嵌套if语句实现多层条判断

```c
if()
    if()
    else()		//内嵌if
else()
    if()
    else()		//内嵌if
```

## switch语句实现多分支选择结构

```c
switch(表达式):
{
    case 常量表达式:	语句1;
    case 常量表达式: 语句2;
    ……
    default;
}
```

**注意**："常量表达式"只是起语句标号作用，并不是在该处进行条件判断。在执行switch语句时，根据switch后面表达式的值找到匹配入口标号，从此标号开始执行下去，不再进行判断，因此应该在执行一个case分支后使其跳出switch结构，终止switch语句的执行。使用break达到此目标。

```c
switch(grade)
{
        case'A':printf("%d",a);break;
        case'B':printf("%d",b);break;
        case'C':printf("%d",c);break;
        case'D':printf("%d",d);break;
    	default:printf("error\n");
}//加了break语句，如果grade的值为'A'，则只输出a。
```

## 用条件表达式实现简单的选择结构

```c
if (a>b)
    max=a;
else
    max=b;
```

可以简化为：

```c
max=(a>b)?a:b;
```

条件表达式的结合方向"自右至左"，如果有条件表达式：

```c
a>b?a:c>?c:d
```

相当于

```c
a>b?a:(c>d?c:d)
```

条件表达式可以写成以下形式：

```c
a>b?(a=100):(b=200);
```

或

```c
a>b?printf("%d",a):printf("%d",b);
```



# 循环结构程序设计

## 用while和do-while语句实现循环

### while语句实现循环

例如：1+2+3+……+100

```c
#include <stdio.h>
int main()
{
	int i,sum=0;	//sum是用来存放累加和的变量，初值为0
	i=1;
	while (i<=100)		//当i小于或等于100时，执行下面大括号中的复合语句
	{
		sum=sum+i;		//将i当前值累加到变量sum中
		i++;		//i的值加1
	}
	printf("%d\n",sum);
	return 0;
}
//5050
```

while循环的特点是：先判断表达式，后执行循环体(即内嵌语句)。

**注意**：

1. 循环体如果包括一个以上的语句，应该用大括号括起来，以复合语句形式出现。如果不加大括号，则while语句的范围知道while后面的第一个分号处。
2. 在循环体中应有使循环趋向于结束的语句。例如循环结束的条件是"i>100"，因此在循环体中应该有使i增值以最终导致i>100的语句，使用"i++"来打此目的，如果没有这个语句，i的值永远不会改变，循环永远不会结束。

### do-while语句实现循环

do-while语句的特点是先执行循环体，然后判断循环条件是否成立。

```c
do
	循环体语句
while(表达式);
```

同样用1加到100求和：

```c
#include <stdio.h>
int main()
{
	int i,sum=0;
	i=1;
	do
	{
		sum=sum+i;
		i++;
	}while("%d\n",sum);
	printf("%d\n",sum);
	return 0;
}
//5050
```

## for语句实现循环

### for语句一般形式和执行过程

for语句的一般形式为

```c
for(表达式1;表达式2;表达式3)语句
for(循环变量赋初值;循环条件;循环变量增值)语句
```

例如：

```c
for(i=1;i<=100;i++)sum=sum+i;
//等价于while
i=1;
while(i<=100)
{
    sum=sum+i;
    i++;
}
```

如何用for循环解决国王的小麦的故事，就是解决
$$
1+2^1+2^2+2^3+……+2^63
$$

```c
#include <stdio.h>
int main()
{
    double p=1,t=1,v;
    int i;
    for(i=1;i<64;i++)	//循环执行63次
    {
        p=p*2;		//p是当前一个格子里的麦子粒数
        t=t+p;		//t是当前麦子总粒数
    }
    v=t/1.42e8;		//v是总体积，单位为立方米
    printf("total=%e\n",t);		//指数形式输出麦子总粒数
    printf("volume=%e\n",v);	//指数形式输出麦子总体积
    return 0;
}
//total=1.844674e+019
//volumn=1.299066e+011
```

for循环中表达式可省略，但是表达式后面的分号不能省略，如：

```c
for(;i<100;i++)	sum=sum+i;
for(i=1;;i++) sum=sum+i;
for(i=1;i<=100;)
{
	sum=sum+i;
	i++;
}
for(;i<100;)
{
	sum=sum+i;
	i++;
}
```



### 循环的嵌套

一个循环体内又包含另一个完整的循环结构，成为循环的嵌套。三种循环结构(while,do-while和for)可以互相嵌套。

### 提前结束循环

#### break

break语句不能用于循环语句和switch语句之外的任何其他语句中。

#### continue

其作用为结束本次循环，跳过循环体中下面尚未执行的语句，接着进行下一次是否执行循环判断。

continue和break语句的区别是：continue只结束本次循环，而不是终止整个循环的执行。而break则是结束整个循环过程，不再判断执行循环的条件是否成立。

# 利用数组处理批量数据

把拥有同一个属性的若干个数据组织成一个整体成为数组，S[30]，S为数组名，下标代表学生的序号。

## 如何定义和引用一维数组

在定义数组时需要指定这批变量的类型、数组名称和数组中包含多少个元素(即变量)。

例如：

```c
int a[10];
```

表示定义一个整型数组，数组名为a，此数组有10个元素。

定义一维数组的方式：

```
类型符	数组名(常量表达式);
```

**注意**：在定义数组时，需要指定数组中元素的个数，方括号中的常量表达式用来表示元素的个数，即数组长度。例如指定a[10]表示a数组有10个元素，下标从0开始，最后一个元素为a[9]。

常量表达式中可以包括常量和符号常量，不能包括变量，即数组的大小不依赖于程序运行过程中变量的值。

例如：

```c
int n;
scanf("%d\n",&n);
int a[n];
//这样是不行的
```

### 怎样引用一维数组的元素

必须先定义数组，才能引用数组中的元素，只能逐个引用数组元素而不能一次引用整个数组中的全部元素。

下标可以是整型常量也可以是整型表达式

```
a[2+1],a[2*3],a[7/3]
//相当于
a[3],a[6],a[2]
```

先用循环结构顺序输出数组元素，然后再倒序输出数组元素。

```c
#include <stdio.h>
int main()
{
    int i,a[10];	//定义整型变量i和整型数组a，a有10个元素
    for(i=0;i<=9;i++)	//先后对10个数组元素赋值
        a[i]=i;
    for(i=9;i>=0;i--)
    {
        printf("%d",a[i]);		//按逆序先后输出数组a中的10个元素
    }
    printf("%\n");
    return 0;
}
```

### 一维数组的初始化

在定义数组的同时给予初值，就称为数组的初始化。

1. 在定义数组时对全部数组元素赋初值，例如：

   ```c
   int a[10]={0,1,2,3,4,5,6,7,8,9};
   ```

2. 可以只给一部分元素赋值。

   ```c
   int a[10]={0,1,2,3,4};
   ```

   定义a数组有10个元素，但大括号内只提供5个初值，这表示只给前面5个元素赋初值，后5个元素初值自动设为0。

3. 在对全部数组元素赋初值时，由于数据的个数已经确定，因此可以在定义数组时不指定数组长度，系统会根据数据的适量确定数组的长度。例如：

   ```c
   int a[5]={1,2,3,4,5};	//定义a数组有5个元素并对全部元素赋初值
   ```

   可以写成：

   ```c
   int a[]={1,2,3,4,5};	//由于有5个初值，系统能确定数组只有5个元素。
   ```

斐波那契数列问题：

```c
f[i]=f[i-1]+f[i-2]
```

用循环求出数组各元素之和：

```c
#include <stdio.h>
int main()
{
    int i,int f[20]={1,1};		//最前面两个元素，f[0]和f[1]的值是1，1
    for(i=2;i<20;i++)
        f[i]=f[i-1]+f[i-2];
    for(i=0;i<20;i++)
    {
        if(i%5==0)		//如i能被5乘除，插入一个换行
            printf("\n");		//输出各元素的值
        printf("%12d",f[i]);
    }
    printf("\n");
    return 0;
}
```

## 如何定义和引用二维数组

定义二维数组的一般形式为：

```c
类型名	数组名[常量表达式][常量表达式];
```

C语言允许使用多维数组，如：

```c
int a[2][3][4];	//定义三维数组a，它有2页，3行，4列
```

### 怎样引用二维数组的元素

可以这样引用二维数组的元素：

```c
b=a[2][3];	//将a数组中2行3列元素的值赋给变量b。
```

二维数组的表示形式为：

```c
数组名[下标][下标]
```

### 二维数组的初始化

1. 分行给二维数组赋初值：

   ```c
   int a[3][4]={{1,2,3,4},{5,6,7,8},{9,10,11,12}};
   ```

2. 可以将所有数据写在一个大括号内，按数组列表的顺序对各元素赋初值。

   ```c
   int a[3][4]={1,2,3,4,5,6,7,8,9,10,11,12};
   ```

   效果和第一种方法一样，但是第一种方法比较好，一行对一列，界限清楚。

3. 可以对部分元素赋初值：

   ```c
   int a[3][4]={{1},{5},{9}};
   ```

   它的作用只是对各行第1列(即序号为0的列)的元素赋初值，其余元素值自动为0.赋初值后数组各元素为：

   1	0	0	0

   5	0	0	0

   9	0	0	0

   也可以对各行中某一元素赋初值：

   ```c
   int a[3][4]={{1},{0,6},{0,0,11}};
   ```

   初始化后的数组元素如下：

   1	0	0	0

   0	6	0	0

   0	0	11	0

   这种方法对非0元素比较少时比较方便，不必将所有的0都写出来，只需输入少量数据。也可以只对某几行元素赋初值。

   ```c
   int a[3][4]={{1},{5,6}};
   ```

   数组元素为：

   1	0	0	0

   5	6	0	0

   0	0	0	0

   第3行不赋初值，也可以对第2行不赋初值，例如：

   ```c
   int a[3][4]={{1},{},{9}};
   ```

   

4. 如果对全部元素都赋初值，即提供全部初始数据，则定义数组时对第一维度可以不指定，但第二维的长度不能省略。

   例如：

   ```c
   int a[3][4]={1,2,3,4,5,6,7,8,9,10,11,12};
   与下面的定义等价：
   int a[][4]={1,2,3,4,5,6,7,8,9,10,11,12};
   ```

   定义时也可以只对部分元素赋初值而省略第一维的长度，但应分行赋初值，例如：

   ```c
   int a[][4]={{0,0,3},{},{0,10}};
   ```

   这样的写法，通知编译系统数组共有3行，数组各元素为：

   0	0	3	0

   0	0	0	0

   0	10	0	0

#### 二位数组程序举例

将一个二维数组a的行和列的元素互换(行列互换)，存到另一个二维数组b中。例如：

```c
a[2][3]={{1,2,3},{4,5,6}}
b[3][2]={{1,4},{2,5},{3,6}}
```

解题思路：将a数组中第i行第j列元素赋给b数组中第j行第i列。

```c
#include <stdio.h>
int main()
{
    int a[2][3]={{1,2,3},{4,5,6}};	//定义a数组并未赋初值
    int b[3][2],i,j;	//定义b数组，并未赋值
    printf("array a:\n");
    for (i=0;i<2;i++)	//用i控制行数的变化
    {
        for(j=0;j<3;j++)	//用j控制列数的变化
        {
            printf("%5f",a[i][j]);		//输出a数组中i行j列元素
            b[i][j]=a[i][j];		//将a数组i行j列元素赋给b数组j行i列元素
        }
        printf("\n");
    }
    printf("array b:\n");
    for (i=0;i<3;i++)	//输出b数组的各元素
    {
        for(j=0;j<2;j++)
        {
            printf("%5d",b[i][j]);
        }
        printf("\n");
    }
    return 0;
}
//运行结果
array a:
	1 2 3
    4 5 6
array b:
	1 4
    2 5
    3 6
```

## 字符数组

用来存放字符数据的数组是字符数组。字符数组中的一个元素存放一个字符。

### 怎样定义字符数组及对其初始化

把“I am Karley"放在一个数组中：

```c
char c[11];		//定义一个字符数组c，包含10个元素，每个元素可存放一个字符
c[0]='I';c[1]='';……c[10]='y';
```

如果定义字符数组时不进行初始化，则数组中个元素的值是不可预料的。如果大括号中提供的初值个数大于数组长度则按语法错误处理。如果初值个数小于数组长度，则只将这些字符赋给数组中前面那些元素，其余元素自动定位空字符(即'\\0')。例如：

```c
char c[10]={'I','','a','m','','k','a','r','l','e','y'};
```

### 怎样引用字符数组

输出一个菱形图：

```c
#include <stdio.h>
int main()
{
    char diamond[][15]={{'','','*'},{'','*','','*'},{'*','','','','*'},{''.'*','','*'},{'','','*'}};	//初始化
    int i,j;
    for (i=0;i<5;i++)
    {
        for(j=0;j<5;j++)
        {
            printf("%c",diamond[i][j]);
        }
        printf("\n");
    }
    return 0;
}
```

### 字符串处理函数

| 函数形式                     | 功能                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| gets(字符数组)               | 从终端输入一个字符串到字符数组                               |
| puts(字符数组)               | 将一个字符串(以'\\0'结束的字符序列)输出到终端                |
| strcat(字符数组1，字符数组2) | 连接两个字符数组中的字符串把字符串2街道字符串1后面           |
| strcpy(字符数组1，字符数组2) | 将字符串2赋值到字符串1中去                                   |
| strcmp(字符串1，字符串2)     | 比较字符串1和字符串2.如果字符串1=字符串2，则函数值为0；如果字符串1>字符串2，则函数值为一个正整数；如果字符串1<字符串2，则函数值为一个负整数。 |
| strlen(字符数组)             | 测试字符串长度                                               |
| strlwr(字符串)               | 将字符串中大写字母换成小写字母                               |
| strupr(字符串)               | 将字符串中小写字母换成大写字母                               |



# 用函数实现模块化程序设计

函数是什么？

函数就是功能，每一个函数用来实现一个特定的功能。函数的名字应反映其代表的功能。

```c
#include <stdio.h>
int main()
{
    void printf_star();		//对printf_Star函数进行声明
    void printf_message();	//对printf_message函数进行声明
    printf_star();		//调用函数
    printf_message();
    printf_star();
    return 0;
}
void printf_star()		//定义printf_star函数
{
    printf("*************");
}
void printf_message()
{
    printf("How do you do!\n");
}
```

说明：

1. 不论main函数在程序中的什么位置，程序执行时总是从main函数开始执行。
2. 所有函数都是平行的，在定义函数式分别进行，相互独立。一个函数并不从属于另一个函数，即函数不能嵌套定义。函数间可以互相调用，但不能调用main函数。main函数式系统调用的。
3. 从用户使用的角度看，函数有两种：
   1. 库函数，有编译系统提供，用户不必自己定义而可以直接使用它们，例如sin函数，cos函数等。
   2. 用户自定义函数，用户根据实际需要自己设计的，用来实现用户指定的功能。
4. 从函数的形式来看，函数分两类：
   1. 无参函数。无参函数一般用来执行一组单纯的操作，在调用无参函数时，主调函数和被调用函数之间不发生传递数据。无参函数可以带回或不带回函数值，但一般不带回函数值居多，此时无参函数应指定为void函数。
   2. 有参函数。在调用函数时，主调函数在调用被调用函数时，通过参数向被调用函数传递数据，一般情况下，执行被调用函数时会得到一个函数值，供主调函数使用，有参函数应定义为与返回值相同的类型。